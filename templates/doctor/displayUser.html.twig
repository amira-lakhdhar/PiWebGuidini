{% extends 'base.html.twig' %}

{% block title %}Hello DoctorController!{% endblock %}

{% block body %}
<center> <h1>Doctors</h1></center>
<div class="containerr" style="padding: 100px; border:20px #0da5c0;">
    Recherche :
    <input type="text" class="form-control" id="advancedh" placeholder="Type here...">
    <div id="all">
    {% include 'ajax.html.twig' %}
    </div>
</div>

{% endblock %}

{% block javascripts %}

<script
        src="{{ asset('https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js')}}">
</script>
<script>
    $( document ).ready(function() {
        var currentRequest = null;
        $("#advancedh").keyup(function(e){
            /* La variable value va prendre la valeur insérer dans le champ de texte
            afin d’effectuer la recherche */
            var value = $(this).val();
            if(currentRequest != null) {
                currentRequest.abort();
            }
            /* Ajax est lancé lors du remplissage du champ texte dont l’id est
            « search » pour faire la recherche */
            currentRequest = $.ajax({
                url : "{{ path('ajaxDoctor') }}",
                type : 'GET',
                data: {
                    'searchValue' : value
                },
                success : function(retour)
                {
                    $('#all').html(retour);
                },
            });
            return false;
        });
    });
</script>
{% endblock %}
